# Dongeng dari Yus seputar kerjaan

Semenjak awal taon 2024 Yus mulai kerja biasa di toko sayur dan buah buahan dekat rumah. Kerjanya biasa namun cukup menarik walau membutuhkan kekuatan fisik saben hari.
Ada baiknya kerja berkeringat seperti ini buat menurunkan gula darah. Semenjak bekerja di sini selama setahun obat obatan kencing manis hampir tidak dibutuhkan lagi.

![Description of gif](https://github.com/FT-cnc/koko/blob/main/Screen-Recording4-ezgif.com-video-to-gif-converter.gif?raw=true)

Kerjaan Yus sangat diarahkan ke sayur mayur yang datang segar terkadang dengan bongkahan es di dalam kotaknya. Memang perlu sarung tangan supaya tangan tidak keram karena dingin. 
Yus bekerja enam hari seminggu, 6 sampe 8 jam sehari. Masuk jam enam pagi sewaktu jumat, sabtu dan minggu. Hari lainnya jam tujuh. Awalnya selalu libur kemis, belakangan libur senin.

## Maksud Utama Membagi Cerita Ini 
Pertama tama, ada baiknya Yus ceritakan tujuan utama dari cerita berikut. Memang ada terkait dengan pencatatan inventory, stock level, automatic reorder ataupun expired notification dan lain sebagainya. Prediksi demand dan supply memang sangat kompleks karena bukan hanya tergantung dari kesetiaan pelanggan ataupun tingkat kehadiran/motivasi karyawan yang tugasnya rutin menjalankan operasai sehari hari, namun juga tergantung dari unsur politik (anjuran membeli produck lokal dimana barang asing masih jauh lebih murah dan lebih bagus) dan keterbatasan klasik seperti semakin kecilnya gudang dari toko sementara distribution center rentan menyorong kelebihan barang ke semua toko.

### Kesetiaan Pelanggan
Dengan meningkatnya inflasi dan biaya hidup ada akibatnya hal ini menimbulkan masalah baru dan juga peluang baru. Ambil contoh negara singapore yang mana Yus sempat bekerja akhir taon 90an. Coba simak tingkat kompensasi karyawan di sana. Jujur, banyak gaji pegawai biasa dari statistik di bawah menunjukkan tidak banyak berubahnya pendapatan selama lebih dari 25 tahun terakhir. 

![Description of gif](https://github.com/FT-cnc/koko/blob/main/image5.jpeg?raw=true).

Coba bandingkan dengan UMR di DKI, setidaknya gaji karyawan bisa naik puluhan kali lipat dalam kurung waktu yang sama. Bagi mereka yang punya spending power lebih besar tidak pernah pusing mencari barang murahan. Atau bisa jadi juga bagi mereka yang dibesarkan dari lingkungan sederhana, betapa besarnya income/saving nya tetap aja mereka sangat [**hati hati belanja**](https://e.vnexpress.net/news/tech/personalities/act-broke-stay-rich-world-s-youngest-self-made-woman-billionaire-lucy-guo-behind-scale-ai-shops-at-shein-commutes-in-a-honda-civic-4895788.html)   

Balik lagi ke segi kesetiaan pelanggan, dengan majunya dunia online, toko toko fisik memang banyak yang gulung tikar. Namun tetap aja ada beberapa pangsa pasar yang menawarkan customer experience yang berbeda. Tempat Yus bekerja lebih terasa seperti museum atau gathering point karena barang kita tidak murah, kamar mandinya bersih seperti kelas hotel bintang lima dan pelayanan kita juga sangat lain dengan toko toko obral lainnya. Boleh dibilang bisnis di tokonya Yus ini tidak pernah kuatir dengan resesi karena mayoritas pelanggan kita adalah para manula yang masih kuat jalan dan tidak pusing mau spending berapa aja. Tentu kita punya competitor, namun boleh dibilang untuk sementara ini kita masih bisa membuka 2-3 toko baru saben tahun dari total 40 toko yang sudah ada.

### Motivasi Karyawan
Yus boleh dibilang sangat self-motivated walau bukan kaya kaya banget. Sebelum bekerja di sini Yus sudah melunasi utang dan kpr. Banyak orang masih pusing mau makan apa dan bagaimana bayar sewa belum lagi makin membesarnya biaya membesarkan anak anak. Sebelum meninggalkan Indonesia, Yus beruntung sempat bekerja di Batam dan belajar banyak dari keterbatasan di pabrik dan menerapkan banyak pemikiran yang sama di toko ini. Yus juga menghadiri kulian malam di bidang mesin bubut senin sampe jumat 6 jam sehari. Dari segi tingkat kehadiran Yus bisa dibilang paling handal. Selalu hadir baik di sekolah dan tempat kerja. Memang tidak gampang buat keluarga yang terkadang merasa kesepian. Buat Yus motivasi utama bekerja di sini adalah membakar kalori.

### Unsur Politik
Memang barang barang dari Amerika Latin, Timur Tengah, Eropa dan Asia Tenggara mulai berdatangan. Perlahan lahan ketergantungan dari negara jiran mulai dikurangi. Namun selama musim dingin negara jiran masih mampu men suplai barangnya dari daerah yang beriklim tropis. Kalau cuaca mulai panas, rantai pasok beralih lagi ke petani lokal. Cinta produk lokal memang ada baiknya namun kehandalan suplai nya juga diragukan karena indoor farming masih terlalu mahal untuk dioperasikan. Belum lagi ide ide seperti vertical farming yang bukan baru namun masih terlalu [**mahal**](https://agfundernews.com/the-economics-of-local-vertical-and-greenhouse-farming-are-getting-competitive),.

### Rantai Pasok
Topik ini memang berat karena menggabungkan banyak hal terutama dari segi teknologi. Salah satunya yang paling sering di gembar gemborkan adalah kecerdasan buat dari sang mesin yang mampu memprediksi. Pencatatan inventory, stock level, automatic reorder ataupun expired notification hanya sebagian dari keseluruhan problema seputar rantai pasok. Untuk memperkecil topik pembahasan, Yus hanya akan menampilkan cerita dari kecerdasan buatan yang membantu pencatatan inventory melalu foto pertama di atas dan bagaimana list nya keluar melalui pengolahan citra. Stock Level sangat rentan dengan kualitas barang yang masuk dan bagaimana kita semua sebagai satu tim bekerja sama menangani barang barang. Contohnya Yus menangani sayur mayur, bisa jadi begitu datang barangnya udah busuk busuk atau sewaktu udah sampe lamban ditangani/dijual sampe membusuk percuma. Automatic reorder masih belum sepenuhnya berjalan. Sistem bisa memberi rekomendasi namun masuk banyak intervensi manual buat order resmi. Kiriman barang datang sangat bervariasi kualitasnya. Dunia pertanian tidak se eksak dunia semen misalnya. Kadang barang yang datang gemuk gemuk kadang kurus kering. Ini tugas Yus untuk merangkai ulang semuanya buat enak dipandang. Expired notification dari segi demand sudah berjalan baik, harga barang yang turun dalam kurung waktu tertentu bisa balik normal dan juga dari segi supply banyak petani lokal mulai menggantikan petani negara jiran belakangan ini karena menanam sayur dengan teknologi biasa sudah bisa dengan harga dan kualitas yang sama.

## Pengolahan Citra
Dari segi teknis, ada cerita lainnya disamping keringat peluh dan angkat angkat dari kerjaan ini. Coba simak gambar di atas yang menampilkan dinamika barang barang di gudang belakang selama dua minggu terakhir.
tentu kerja di dalam kulkas lebih tidak terasa menyiksa karena temepraturnya antara 4-5 derajat. Kalau musim panas tempat ini enak juga jadinya. 

![Description of gif](https://github.com/FT-cnc/koko/blob/main/image1.jpg?raw=true)

Coba simak tulisan di dalam kotak kuning di atas. SPIN katakanlah singkatan dari spinach (bayam). Memang pengolahan citra sangat membantu menafsirkan tulisan apa yang tertulis di atas masing masing kotak.
Cara lama memang segampang mengambil gambar dan mencatat ulang inventori gudang berdasarkan apa yang tertulis. Kita akan melompati proses klasifikasi dan pengelompokan seperti berikut ini

![Description of gif](https://github.com/FT-cnc/koko/blob/main/image2.png?raw=true)

Dengan menggunakan account google, cobak simak link [**ini**](https://colab.research.google.com/drive/1HpR8_-ui5gHZwDNVXjsHyiys8EkRUs3I#scrollTo=5MCn6m648yV-), dimana akan kita bahas satu per satu.

## Unggah Gambar
Salah satu keterbatasan google colab yang kita pakai di sini adalah dihapusnya segala macam gambar secara otomatis kalau notebooknya tidak aktif selama sejam lebih. Tujuannya memang buat menghemat biaya.
Teknologi cloud computing sekarang memang luar biasa karena kita tidak perlu meng install apa pun namun beban kerja di data center yang dalam hal ini dimiliki Google juga sangat berat apalagi mereka tidak mendapat income dari iklan.
Singkat kata mari kita simak bagaimana caranya menyimpan gambar secara permanen tanpa harus diupload lagi satu per satu.

![Description of gif](https://github.com/FT-cnc/koko/blob/main/image3.png?raw=true)

Gambar di atas ini adalah contoh 20 macam tipe barang dengan 3 variasi tulisan tangan Yus. Totalnya dalam hal ini ada 60 gambar. Dalam kondisi nyata tipe barang bisa mencapai 40 macam dan idealnya variasi tulisan tangan harus lebih dari tiga.
Semakin banyak variasinya, semakin pintar kecerdasan buatan menafsirkan tiap tiap tulisan.

Di bawah ini adalah salah satu contoh tulisan tangan yang di digitalisasi dengan numpy array (istilah canggih dari bahasa [**python**](https://en.wikipedia.org/wiki/NumPy)).
Coba ligat salah satu tulisan tangan berikut dengan resolusi (176, 394) yang menampilkan tulisan Boston.

```txt
import numpy as np
from PIL import Image
gray_array01 = np.array(Image.open("/content/boston1.jpeg").convert("L"))
for row in gray_array01:
    print(' '.join(f'{int(val):03}' for val in row))
```

![Description of gif](https://github.com/FT-cnc/koko/blob/main/image6.gif?raw=true)


Gambar di atas adalah salah satu contoh tulisan tangan yang di digitalisasi. Keseluruhan contoh yang disediakan di sini disimpan di dalam variable berikut
```txt
gray_array01 --> sampel tulisan tangan boston (boston lettuce) yang pertama
gray_array02 --> sampel tulisan tangan boston (boston lettuce) yang kedua
gray_array03 --> sampel tulisan tangan boston (boston lettuce) yang ketiga
gray_array04 --> sampel tulisan tangan green  (green leaf lettuce) yang pertama
gray_array05 --> sampel tulisan tangan green  (green leaf lettuce) yang kedua
gray_array06 --> sampel tulisan tangan green  (green leaf lettuce) yang ketiga
gray_array07 --> sampel tulisan tangan red    (red leaf lettuce) yang pertama
gray_array08 --> sampel tulisan tangan red    (red leaf lettuce) yang kedua
gray_array09 --> sampel tulisan tangan red    (red leaf lettuce) yang ketiga
gray_array10 --> sampel tulisan tangan r.chard (red chard) yang pertama
gray_array11 --> sampel tulisan tangan r.chard (red chard) yang kedua
gray_array12 --> sampel tulisan tangan r.chard (red chard) yang ketiga
gray_array13 --> sampel tulisan tangan g.chard (green chard) yang pertama
gray_array14 --> sampel tulisan tangan g.chard (green chard) yang kedua
gray_array15 --> sampel tulisan tangan g.chard (green chard) yang ketiga
gray_array16 --> sampel tulisan tangan romaine (romaine lettuce) yang pertama
gray_array17 --> sampel tulisan tangan romaine (romaine lettuce) yang kedua
gray_array18 --> sampel tulisan tangan romaine (romaine lettuce) yang ketiga
gray_array19 --> sampel tulisan tangan plain (plain parsley) yang pertama
gray_array20 --> sampel tulisan tangan plain (plain parsley) yang kedua
gray_array21 --> sampel tulisan tangan plain (plain parsley) yang ketiga
gray_array22 --> sampel tulisan tangan curly (curly parsley) yang pertama
gray_array23 --> sampel tulisan tangan curly (curly parsley) yang kedua
gray_array24 --> sampel tulisan tangan curly (curly parsley) yang ketiga
gray_array28 --> sampel tulisan tangan dill yang pertama
gray_array29 --> sampel tulisan tangan dill yang kedua
gray_array30 --> sampel tulisan tangan dill yang ketiga
gray_array31 --> sampel tulisan tangan beet yang pertama
gray_array32 --> sampel tulisan tangan beet yang kedua
gray_array33 --> sampel tulisan tangan beet yang ketiga
gray_array34 --> sampel tulisan tangan leek yang pertama
gray_array35 --> sampel tulisan tangan leek yang kedua
gray_array36 --> sampel tulisan tangan leek yang ketiga
gray_array37 --> sampel tulisan tangan cilan (cilantro) yang pertama
gray_array38 --> sampel tulisan tangan cilan (cilantro) yang kedua
gray_array39 --> sampel tulisan tangan cilan (cilantro) yang ketiga
gray_array40 --> sampel tulisan tangan spin (spinach) yang pertama
gray_array41 --> sampel tulisan tangan spin (spinach) yang kedua
gray_array42 --> sampel tulisan tangan spin (spinach) yang ketiga
gray_array43 --> sampel tulisan tangan collard yang pertama
gray_array44 --> sampel tulisan tangan collard yang kedua
gray_array45 --> sampel tulisan tangan collard yang ketiga
gray_array46 --> sampel tulisan tangan dand (dandelion) yang pertama
gray_array47 --> sampel tulisan tangan dand (dandelion) yang kedua
gray_array48 --> sampel tulisan tangan dand (dandelion) yang ketiga
gray_array49 --> sampel tulisan tangan g.kale (green kale) yang pertama
gray_array50 --> sampel tulisan tangan g.kale (green kale) yang kedua
gray_array51 --> sampel tulisan tangan g.kale (green kale) yang ketiga
gray_array52 --> sampel tulisan tangan b.kale (black kale) yang pertama
gray_array53 --> sampel tulisan tangan b.kale (black kale) yang kedua
gray_array54 --> sampel tulisan tangan b.kale (black kale) yang ketiga
gray_array55 --> sampel tulisan tangan carr (carrot) yang pertama
gray_array56 --> sampel tulisan tangan carr (carrot) yang kedua
gray_array57 --> sampel tulisan tangan carr (carrot) yang ketiga
gray_array58 --> sampel tulisan tangan endive yang pertama
gray_array59 --> sampel tulisan tangan endive yang kedua
gray_array60 --> sampel tulisan tangan endive yang ketiga
gray_array61 --> sampel tulisan tangan esc (escarole) yang pertama
gray_array62 --> sampel tulisan tangan esc (escarole) yang kedua
gray_array63 --> sampel tulisan tangan esc (escarole) yang ketiga
```
Selanjutnya Yus pilih logistic regression untuk melatih model kecerdasan buatan membedakan tulisan.
Namun beleumnya Yus akan menggantikan dimensi gambar yang 176 X 394 menjadi satu dimensi (1 x 69344).

```txt
import numpy as np

# Collect available array variables (excluding the missing ones)
valid_indices = [i for i in range(1, 64) if i not in (25, 26, 27)]
array_list = [globals()[f'gray_array{i:02d}'] for i in valid_indices]

# Stack the arrays along a new first axis
X_train = np.stack(array_list)

print(X_train.shape)    # -->  akan memberi nilai (60, 176, 394)
X_TRAIN=X_train.reshape(60,-1)
y_train = np.repeat(np.arange(1, 21), 3).astype(np.uint8)
print(X_TRAIN.shape)    # --> akan memberi nilai (60, 69344)
print(y_train.shape)    # --> memberi nilai 60

from sklearn.linear_model import LogisticRegression
lr = LogisticRegression()
lr.fit(X_TRAIN, y_train)

```

Selanjtnya kita coba menge test model ini dengan gambar gray_array13 misalnya.

```txt
lr.predict_proba(gray_array13.reshape(1,-1))
```

Yang mana hasilnya akan seperti ini

```txt
array([[1.64642986e-15, 3.71669177e-12, 6.82949909e-13, 7.64134141e-19,
        9.99999959e-01, 4.44299443e-16, 8.02623005e-12, 3.32164451e-15,
        9.26804467e-12, 1.41511848e-15, 2.41060830e-12, 1.51412174e-08,
        6.32193493e-09, 3.39862388e-16, 7.77069733e-10, 3.09824108e-09,
        2.67960481e-13, 1.52454169e-08, 4.52316575e-13, 1.88269702e-13]])
```

Supaya  lebih mudah dimengerti kita tambahkan varibel berikut ini

```txt
class_names = 'boston_lettuce green_leaf_lettuce red_leaf_lettuce red_swiss_chard green_swiss_chard romaine_lettuce plain_parsley curly_parsley dill beets leeks cilantro spinach collard dandelion green_kale black_kale carrot endive escarole'.split()
len(class_names)
```

Akhirnya kita bisa menggunakan model kecerdasan buatan ini dengan cara ini

```txt
imagex=gray_array60

import matplotlib.pyplot as plt

# Display the imagex array in a smaller scale using a smaller figure size
plt.figure(figsize=(2, 1))  # Adjust the size as needed
plt.imshow(imagex, cmap='gray')  # Add 'cmap' if it's a grayscale image
plt.axis('off')
plt.show()

for i in range(len(class_names)):
    print(class_names[i], '     \t',\
          int((lr.predict_proba(imagex.reshape(1,-1)) ).tolist()[0][i]*10000)/100)
```

yang mana akan menunjukkan hasil sepertti ini

```txt
boston_lettuce      	 0.0
green_leaf_lettuce       0.0
red_leaf_lettuce      	 0.0
red_swiss_chard      	 0.0
green_swiss_chard      	 0.0
romaine_lettuce      	 0.0
plain_parsley      	 0.0
curly_parsley      	 0.0
dill      	         0.0
beets      	         0.0
leeks      	         0.0
cilantro      	         0.0
spinach      	         0.0
collard      	         0.0
dandelion      	         0.0
green_kale      	 0.0
black_kale      	 0.0
carrot      	         0.0
endive      	         99.99
escarole      	         0.0
```

![Description of gif](https://github.com/FT-cnc/koko/blob/main/image7.png?raw=true)
